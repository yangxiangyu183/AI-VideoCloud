/*! 
 Build based on gin-vue-admin 
 Time : 1753275382000 */
!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,a="function"==typeof Symbol?Symbol:{},u=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function i(e,a,u,o){var i=a&&a.prototype instanceof c?a:c,d=Object.create(i.prototype);return t(d,"_invoke",function(e,t,a){var u,o,i,c=0,d=a||[],f=!1,s={p:0,n:0,v:r,a:y,f:y.bind(r,4),d:function(e,t){return u=e,o=0,i=r,s.n=t,l}};function y(e,t){for(o=e,i=t,n=0;!f&&c&&!a&&n<d.length;n++){var a,u=d[n],y=s.p,v=u[2];e>3?(a=v===t)&&(i=u[(o=u[4])?5:(o=3,3)],u[4]=u[5]=r):u[0]<=y&&((a=e<2&&y<u[1])?(o=0,s.v=t,s.n=u[1]):y<v&&(a=e<3||u[0]>t||t>v)&&(u[4]=e,u[5]=t,s.n=v,o=0))}if(a||e>1)return l;throw f=!0,t}return function(a,d,v){if(c>1)throw TypeError("Generator is already running");for(f&&1===d&&y(d,v),o=d,i=v;(n=o<2?r:i)||!f;){u||(o?o<3?(o>1&&(s.n=-1),y(o,i)):s.n=i:s.v=i);try{if(c=2,u){if(o||(a="next"),n=u[a]){if(!(n=n.call(u,i)))throw TypeError("iterator result is not an object");if(!n.done)return n;i=n.value,o<2&&(o=0)}else 1===o&&(n=u.return)&&n.call(u),o<2&&(i=TypeError("The iterator does not provide a '"+a+"' method"),o=1);u=r}else if((n=(f=s.n<0)?i:e.call(t,s))!==l)break}catch(n){u=r,o=1,i=n}finally{c=1}}return{value:n,done:f}}}(e,u,o),!0),d}var l={};function c(){}function d(){}function f(){}n=Object.getPrototypeOf;var s=[][u]?n(n([][u]())):(t(n={},u,function(){return this}),n),y=f.prototype=c.prototype=Object.create(s);function v(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,t(e,o,"GeneratorFunction")),e.prototype=Object.create(y),e}return d.prototype=f,t(y,"constructor",f),t(f,"constructor",d),d.displayName="GeneratorFunction",t(f,o,"GeneratorFunction"),t(y),t(y,o,"Generator"),t(y,u,function(){return this}),t(y,"toString",function(){return"[object Generator]"}),(e=function(){return{w:i,m:v}})()}function t(e,r,n,a){var u=Object.defineProperty;try{u({},"",{})}catch(e){u=0}t=function(e,r,n,a){if(r)u?u(e,r,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[r]=n;else{var o=function(r,n){t(e,r,function(e){return this._invoke(r,n,e)})};o("next",0),o("throw",1),o("return",2)}},t(e,r,n,a)}function r(e,t,r,n,a,u,o){try{var i=e[u](o),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,u){var o=e.apply(t,n);function i(e){r(o,a,u,i,l,"next",e)}function l(e){r(o,a,u,i,l,"throw",e)}i(void 0)})}}System.register(["./087AC4D233B64EB0authority-legacy.whm8KNj6.js","./087AC4D233B64EB0menus-legacy.BGpuhO2U.js","./087AC4D233B64EB0apis-legacy.CzYMkYBc.js","./087AC4D233B64EB0datas-legacy.v0Tyl7EZ.js","./087AC4D233B64EB0warningBar-legacy.Bl38HjNE.js","./087AC4D233B64EB0index-legacy.jiLLMCc9.js","./087AC4D233B64EB0authorityBtn-legacy.2OthFJuG.js","./087AC4D233B64EB0api-legacy.DMBPcES_.js"],function(t,r){"use strict";var a,u,o,i,l,c,d,f,s,y,v,h,p,m,b,g,I,_,w,k,C,B,N,j;return{setters:[function(e){a=e.g,u=e.d,o=e.c,i=e.u,l=e.a},function(e){c=e.default},function(e){d=e.default},function(e){f=e.default},function(e){s=e._},function(e){y=e.a,v=e.I,h=e.g,p=e.c,m=e.o,b=e.f,g=e.b,I=e.i,_=e.d,w=e.w,k=e.h,C=e.t,B=e.v,N=e.ab,j=e.E},null,null],execute:function(){var r=document.createElement("style");r.textContent=".authority .el-input-number{margin-left:15px}.authority .el-input-number span{display:none}.tree-content{margin-top:10px;height:calc(100vh - 158px);overflow:auto}\n/*$vite$:1*/",document.head.appendChild(r);var x={class:"authority"},V={class:"gva-table-box"},A={class:"gva-btn-list"},E={class:"flex justify-between items-center"},D={class:"text-lg"};t("default",Object.assign({name:"Authority"},{__name:"authority",setup:function(t){var r=y([{authorityId:0,authorityName:"根角色/严格模式下为当前角色"}]),O=y(!1),S=y("add"),T=y({}),G=v(),P=y("新增角色"),z=y(!1),F=y(!1),U=y({}),R=y({authorityId:0,authorityName:"",parentId:0}),q=y({authorityId:[{required:!0,message:"请输入角色ID",trigger:"blur"},{validator:function(e,t,r){return/^[0-9]*[1-9][0-9]*$/.test(t)?r():r(new Error("请输入正整数"))},trigger:"blur",message:"必须为正整数"}],authorityName:[{required:!0,message:"请输入角色名",trigger:"blur"}],parentId:[{required:!0,message:"请选择父角色",trigger:"blur"}]}),$=y([]),Q=function(){var t=n(e().m(function t(){var r;return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,a();case 1:0===(r=e.v).code&&($.value=r.data);case 2:return e.a(2)}},t)}));return function(){return t.apply(this,arguments)}}();Q();var H=function(e,t){T.value[e]=t},J=y(null),K=y(null),L=y(null),M=function(e,t){var r=[J,K,L];t&&r[t].value.needConfirm&&(r[t].value.enterAndNext(),r[t].value.needConfirm=!1)},W=y(null),X=function(){W.value&&W.value.resetFields(),R.value={authorityId:0,authorityName:"",parentId:0}},Y=function(){X(),z.value=!1,F.value=!1},Z=function(){W.value.validate(function(){var t=n(e().m(function t(r){var n,a;return e().w(function(e){for(;;)switch(e.n){case 0:if(!r){e.n=8;break}R.value.authorityId=Number(R.value.authorityId),a=S.value,e.n="add"===a?1:"edit"===a?3:"copy"===a?5:7;break;case 1:return e.n=2,l(R.value);case 2:return 0===e.v.code&&(j({type:"success",message:"添加成功!"}),Q(),Y()),e.a(3,7);case 3:return e.n=4,i(R.value);case 4:return 0===e.v.code&&(j({type:"success",message:"添加成功!"}),Q(),Y()),e.a(3,7);case 5:return(n={authority:{authorityId:0,authorityName:"",datauthorityId:[],parentId:0},oldAuthorityId:0}).authority.authorityId=R.value.authorityId,n.authority.authorityName=R.value.authorityName,n.authority.parentId=R.value.parentId,n.authority.dataAuthorityId=U.value.dataAuthorityId,n.oldAuthorityId=U.value.authorityId,e.n=6,o(n);case 6:0===e.v.code&&(j({type:"success",message:"复制成功！"}),Q());case 7:X(),z.value=!1;case 8:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())},ee=function(){r.value=[{authorityId:0,authorityName:"根角色(严格模式下为当前用户角色)"}],te($.value,r.value,!1)},te=function(e,t,r){e&&e.forEach(function(e){if(e.children&&e.children.length){var n={authorityId:e.authorityId,authorityName:e.authorityName,disabled:r||e.authorityId===R.value.authorityId,children:[]};te(e.children,n.children,r||e.authorityId===R.value.authorityId),t.push(n)}else{var a={authorityId:e.authorityId,authorityName:e.authorityName,disabled:r||e.authorityId===R.value.authorityId};t.push(a)}})},re=function(e){X(),P.value="新增角色",S.value="add",R.value.parentId=e,ee(),z.value=!0};return function(t,a){var o=h("el-button"),i=h("el-table-column"),l=h("el-table"),y=h("el-cascader"),v=h("el-form-item"),F=h("el-input"),X=h("el-form"),te=h("el-drawer"),ne=h("el-tab-pane"),ae=h("el-tabs");return m(),p("div",x,[b(s,{title:"注：右上角头像下拉可切换角色"}),g("div",V,[g("div",A,[b(o,{type:"primary",icon:"plus",onClick:a[0]||(a[0]=function(e){return re(0)})},{default:w(function(){return a[6]||(a[6]=[k("新增角色")])}),_:1,__:[6]})]),b(l,{data:$.value,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"authorityId",style:{width:"100%"}},{default:w(function(){return[b(i,{label:"角色ID","min-width":"180",prop:"authorityId"}),b(i,{align:"left",label:"角色名称","min-width":"180",prop:"authorityName"}),b(i,{align:"left",label:"操作",width:"460"},{default:w(function(t){return[b(o,{icon:"setting",type:"primary",link:"",onClick:function(e){return r=t.row,O.value=!0,void(T.value=r);var r}},{default:w(function(){return a[7]||(a[7]=[k("设置权限")])}),_:2,__:[7]},1032,["onClick"]),b(o,{icon:"plus",type:"primary",link:"",onClick:function(e){return re(t.row.authorityId)}},{default:w(function(){return a[8]||(a[8]=[k("新增子角色")])}),_:2,__:[8]},1032,["onClick"]),b(o,{icon:"copy-document",type:"primary",link:"",onClick:function(e){return function(e){for(var t in ee(),P.value="拷贝角色",S.value="copy",R.value)R.value[t]=e[t];U.value=e,z.value=!0}(t.row)}},{default:w(function(){return a[9]||(a[9]=[k("拷贝")])}),_:2,__:[9]},1032,["onClick"]),b(o,{icon:"edit",type:"primary",link:"",onClick:function(e){return function(e){for(var t in ee(),P.value="编辑角色",S.value="edit",R.value)R.value[t]=e[t];ee(),W.value&&W.value.clearValidate(),z.value=!0}(t.row)}},{default:w(function(){return a[10]||(a[10]=[k("编辑")])}),_:2,__:[10]},1032,["onClick"]),b(o,{icon:"delete",type:"primary",link:"",onClick:function(r){return a=t.row,void N.confirm("此操作将永久删除该角色, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(e().m(function t(){return e().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,u({authorityId:a.authorityId});case 1:0===e.v.code&&(j({type:"success",message:"删除成功!"}),Q());case 2:return e.a(2)}},t)}))).catch(function(){j({type:"info",message:"已取消删除"})});var a}},{default:w(function(){return a[11]||(a[11]=[k("删除")])}),_:2,__:[11]},1032,["onClick"])]}),_:1})]}),_:1},8,["data"])]),b(te,{modelValue:z.value,"onUpdate:modelValue":a[4]||(a[4]=function(e){return z.value=e}),size:B(G).drawerSize,"show-close":!1},{header:w(function(){return[g("div",E,[g("span",D,C(P.value),1),g("div",null,[b(o,{onClick:Y},{default:w(function(){return a[12]||(a[12]=[k("取 消")])}),_:1,__:[12]}),b(o,{type:"primary",onClick:Z},{default:w(function(){return a[13]||(a[13]=[k("确 定")])}),_:1,__:[13]})])])]}),default:w(function(){return[b(X,{ref_key:"authorityForm",ref:W,model:R.value,rules:q.value,"label-width":"80px"},{default:w(function(){return[b(v,{label:"父级角色",prop:"parentId"},{default:w(function(){return[b(y,{modelValue:R.value.parentId,"onUpdate:modelValue":a[1]||(a[1]=function(e){return R.value.parentId=e}),style:{width:"100%"},disabled:"add"===S.value,options:r.value,props:{checkStrictly:!0,label:"authorityName",value:"authorityId",disabled:"disabled",emitPath:!1},"show-all-levels":!1,filterable:""},null,8,["modelValue","disabled","options"])]}),_:1}),b(v,{label:"角色ID",prop:"authorityId"},{default:w(function(){return[b(F,{modelValue:R.value.authorityId,"onUpdate:modelValue":a[2]||(a[2]=function(e){return R.value.authorityId=e}),disabled:"edit"===S.value,autocomplete:"off",maxlength:"15"},null,8,["modelValue","disabled"])]}),_:1}),b(v,{label:"角色姓名",prop:"authorityName"},{default:w(function(){return[b(F,{modelValue:R.value.authorityName,"onUpdate:modelValue":a[3]||(a[3]=function(e){return R.value.authorityName=e}),autocomplete:"off"},null,8,["modelValue"])]}),_:1})]}),_:1},8,["model","rules"])]}),_:1},8,["modelValue","size"]),O.value?(m(),I(te,{key:0,modelValue:O.value,"onUpdate:modelValue":a[5]||(a[5]=function(e){return O.value=e}),size:B(G).drawerSize,title:"角色配置"},{default:w(function(){return[b(ae,{"before-leave":M,type:"border-card"},{default:w(function(){return[b(ne,{label:"角色菜单"},{default:w(function(){return[b(c,{ref_key:"menus",ref:J,row:T.value,onChangeRow:H},null,8,["row"])]}),_:1}),b(ne,{label:"角色api"},{default:w(function(){return[b(d,{ref_key:"apis",ref:K,row:T.value,onChangeRow:H},null,8,["row"])]}),_:1}),b(ne,{label:"资源权限"},{default:w(function(){return[b(f,{ref_key:"datas",ref:L,authority:$.value,row:T.value,onChangeRow:H},null,8,["authority","row"])]}),_:1})]}),_:1})]}),_:1},8,["modelValue","size"])):_("",!0)])}}}))}}})}();
