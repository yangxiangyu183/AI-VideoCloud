# 告警显示增强功能需求文档

## 介绍

本功能旨在改进现有的alert.vue页面，使其能够更好地显示告警数据，并将monitor_device表中的设备信息一起展示，提供更完整的告警信息视图。当前页面只显示基本的告警信息，缺少设备详细信息和更丰富的展示效果。

## 需求

### 需求1：增强告警数据显示

**用户故事：** 作为系统管理员，我希望在告警页面看到更完整的告警信息，包括设备详细信息，以便更好地了解告警情况。

#### 验收标准

1. WHEN 用户访问告警页面 THEN 系统 SHALL 显示告警数据与对应的设备信息
2. WHEN 告警数据加载时 THEN 系统 SHALL 通过camera_id关联查询monitor_device表获取设备详细信息
3. WHEN 显示告警卡片时 THEN 系统 SHALL 包含设备名称、设备状态、分辨率等设备信息
4. IF 设备信息不存在 THEN 系统 SHALL 显示默认的设备信息占位符

### 需求2：优化告警卡片展示效果

**用户故事：** 作为用户，我希望告警卡片能够更清晰地展示关键信息，包括设备状态指示器，以便快速识别告警的重要程度。

#### 验收标准

1. WHEN 显示告警卡片时 THEN 系统 SHALL 根据设备状态显示不同颜色的状态指示器
2. WHEN 设备状态为在线时 THEN 系统 SHALL 显示绿色状态指示器
3. WHEN 设备状态为离线时 THEN 系统 SHALL 显示红色状态指示器  
4. WHEN 设备状态为故障时 THEN 系统 SHALL 显示橙色状态指示器
5. WHEN 显示告警信息时 THEN 系统 SHALL 包含设备名称、视频流地址、分辨率等详细信息

### 需求3：改进后端API支持

**用户故事：** 作为开发者，我希望后端API能够返回关联的设备信息，以减少前端的多次请求。

#### 验收标准

1. WHEN 调用getAlertList API时 THEN 系统 SHALL 返回告警数据及关联的设备信息
2. WHEN 查询告警数据时 THEN 系统 SHALL 通过LEFT JOIN关联monitor_device表
3. WHEN 返回数据时 THEN 系统 SHALL 包含设备名称、状态、分辨率、视频流地址等字段
4. IF 关联的设备不存在 THEN 系统 SHALL 返回null值而不是报错

### 需求4：增强筛选和搜索功能

**用户故事：** 作为用户，我希望能够根据设备状态和设备名称进行筛选，以便更精确地查找告警信息。

#### 验收标准

1. WHEN 用户在筛选条件中 THEN 系统 SHALL 提供设备状态筛选选项
2. WHEN 用户输入设备名称搜索时 THEN 系统 SHALL 支持模糊匹配设备名称
3. WHEN 用户选择设备状态筛选时 THEN 系统 SHALL 只显示对应状态设备的告警
4. WHEN 用户重置筛选条件时 THEN 系统 SHALL 清空所有筛选条件并重新加载数据

### 需求5：优化详情弹窗显示

**用户故事：** 作为用户，我希望在查看告警详情时能看到完整的设备信息，包括设备配置和状态信息。

#### 验收标准

1. WHEN 用户点击查看告警详情时 THEN 系统 SHALL 显示完整的设备信息
2. WHEN 显示详情弹窗时 THEN 系统 SHALL 包含设备名称、状态、分辨率、视频流地址等信息
3. WHEN 设备状态发生变化时 THEN 系统 SHALL 实时更新状态显示
4. WHEN 显示设备信息时 THEN 系统 SHALL 提供设备状态的中文描述