# 告警显示增强功能实现计划

- [x] 1. 创建增强的数据模型和结构体






  - 在server/model/alert_video/alert.go中创建AlertWithDevice结构体
  - 定义包含设备信息的响应数据结构
  - 添加设备状态常量定义
  - _需求: 1.1, 1.2, 2.3_



- [ ] 2. 增强后端服务层关联查询功能








  - 修改server/service/alert_video/alert.go中的GetAlertInfoList方法
  - 实现LEFT JOIN查询关联monitor_device表
  - 添加设备状态和设备名称筛选逻辑
  - 处理设备不存在的情况
  - _需求: 3.1, 3.2, 3.3, 4.1, 4.3_



- [x] 3. 更新请求参数结构体





  - 修改server/model/alert_video/request/alert.go


  - 添加设备状态筛选参数deviceStatus
  - 添加设备名称搜索参数deviceName
  - 更新参数验证逻辑
  - _需求: 4.1, 4.2_



- [ ] 4. 修改API控制器支持新的筛选参数
  - 更新server/api/v1/alert_video/alert.go中的GetAlertList方法
  - 处理新增的筛选参数
  - 确保返回数据包含设备信息
  - 添加错误处理逻辑


  - _需求: 3.1, 3.4_

- [ ] 5. 创建设备状态工具函数
  - 在前端创建utils/deviceStatus.js工具文件
  - 实现设备状态映射函数（1-在线，2-离线，3-故障）
  - 创建状态颜色映射函数

  - 实现状态中文描述函数
  - _需求: 2.1, 2.2, 2.3, 2.4, 5.4_




- [ ] 6. 增强前端告警卡片组件显示
  - 修改web/src/view/alert_video/alert/alert.vue的卡片模板
  - 添加设备名称显示

  - 实现设备状态指示器组件
  - 添加分辨率和设备状态信息显示
  - 优化卡片布局和样式
  - _需求: 1.3, 2.1, 2.2, 2.3, 2.4, 2.5_




- [x] 7. 增强筛选条件组件

  - 在筛选栏中添加设备状态多选框
  - 添加设备名称搜索输入框
  - 实现筛选条件的数据绑定
  - 更新搜索和重置逻辑
  - _需求: 4.1, 4.2, 4.4_






- [ ] 8. 更新详情弹窗显示内容
  - 修改详情弹窗模板，添加设备信息字段
  - 显示设备名称、状态、分辨率、视频流地址
  - 实现设备状态的中文显示
  - 优化弹窗布局和信息展示
  - _需求: 5.1, 5.2, 5.4_

- [x] 9. 实现前端API调用逻辑更新



  - 更新getAlertList API调用，传递新的筛选参数
  - 处理返回的设备信息数据
  - 实现错误处理和默认值设置
  - 更新数据绑定逻辑
  - _需求: 1.1, 1.4, 3.1_

- [ ] 10. 添加样式和视觉效果
  - 创建设备状态指示器的CSS样式
  - 实现不同状态的颜色主题
  - 优化卡片hover效果和交互反馈
  - 确保响应式布局兼容性
  - _需求: 2.1, 2.2, 2.3, 2.4_

- [ ] 11. 实现数据加载状态和错误处理
  - 添加加载状态指示器
  - 实现网络错误的友好提示
  - 处理设备信息缺失的降级显示
  - 添加重试机制
  - _需求: 1.4, 3.4_

- [ ] 12. 创建单元测试
  - 为新增的工具函数编写单元测试
  - 测试设备状态映射逻辑
  - 测试筛选条件处理逻辑
  - 验证错误处理机制
  - _需求: 1.1, 2.1, 4.1_