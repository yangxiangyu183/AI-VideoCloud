/*! 
 Build based on gin-vue-admin 
 Time : 1753348791000 */
import{s as a}from"./087AC4D233B64EB0authority.BBPAK72Z.js";import{_ as t}from"./087AC4D233B64EB0warningBar.DZHAesky.js";import{a as e,g as l,c as o,o as u,f as r,b as i,w as s,h as n,F as d,D as h,i as c,t as y,E as f}from"./087AC4D233B64EB0index.DdOzTnT7.js";const p={class:"sticky top-0.5 z-10 my-4"},v={class:"clear-both pt-4"},m=Object.assign({name:"Datas"},{__name:"datas",props:{row:{default:function(){return{}},type:Object},authority:{default:function(){return[]},type:Array}},emits:["changeRow"],setup(m,{expose:I,emit:_}){const g=m,w=e([]),A=e(!1),b=a=>{a&&a.forEach(a=>{const t={};t.authorityId=a.authorityId,t.authorityName=a.authorityName,w.value.push(t),a.children&&a.children.length&&b(a.children)})},C=e([]);b(g.authority),g.row.dataAuthorityId&&g.row.dataAuthorityId.forEach(a=>{const t=w.value&&w.value.filter(t=>t.authorityId===a.authorityId)&&w.value.filter(t=>t.authorityId===a.authorityId)[0];C.value.push(t)});const k=_,x=()=>{C.value=[...w.value],k("changeRow","dataAuthorityId",C.value),A.value=!0},B=()=>{C.value=w.value.filter(a=>a.authorityId===g.row.authorityId),k("changeRow","dataAuthorityId",C.value),A.value=!0},E=()=>{const a=[];j(g.row,a),C.value=w.value.filter(t=>a.indexOf(t.authorityId)>-1),k("changeRow","dataAuthorityId",C.value),A.value=!0},j=(a,t)=>{t.push(a.authorityId),a.children&&a.children.forEach(a=>{j(a,t)})},D=async()=>{0===(await a(g.row)).code&&f({type:"success",message:"资源设置成功"})},R=()=>{C.value=C.value.filter(a=>a),k("changeRow","dataAuthorityId",C.value),A.value=!0};return I({enterAndNext:()=>{D()},needConfirm:A}),(a,e)=>{const f=l("el-button"),m=l("el-checkbox"),I=l("el-checkbox-group");return u(),o("div",null,[r(t,{title:"此功能仅用于创建角色和角色的many2many关系表，具体使用还须自己结合表实现业务，详情参考示例代码（客户示例）。此功能不建议使用，建议使用插件市场【组织管理功能（点击前往）】来管理资源权限。",href:"https://plugin.gin-vue-admin.com/#/layout/newPluginInfo?id=36"}),i("div",p,[r(f,{class:"float-left",type:"primary",onClick:x},{default:s(()=>e[1]||(e[1]=[n("全选",-1)])),_:1,__:[1]}),r(f,{class:"float-left",type:"primary",onClick:B},{default:s(()=>e[2]||(e[2]=[n("本角色",-1)])),_:1,__:[2]}),r(f,{class:"float-left",type:"primary",onClick:E},{default:s(()=>e[3]||(e[3]=[n("本角色及子角色",-1)])),_:1,__:[3]}),r(f,{class:"float-right",type:"primary",onClick:D},{default:s(()=>e[4]||(e[4]=[n("确 定",-1)])),_:1,__:[4]})]),i("div",v,[r(I,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=a=>C.value=a),onChange:R},{default:s(()=>[(u(!0),o(d,null,h(w.value,(a,t)=>(u(),c(m,{key:t,label:a},{default:s(()=>[n(y(a.authorityName),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])])])}}});export{m as default};
