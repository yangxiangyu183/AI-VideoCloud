/*! 
 Build based on gin-vue-admin 
 Time : 1753348791000 */
import{e,a as t}from"./087AC4D233B64EB0exportTemplate.D_l_U4Rb.js";import{g as o,i as a,o as r,w as n,h as s,E as c,k as i,f as p,v as l}from"./087AC4D233B64EB0index.DdOzTnT7.js";const d={__name:"exportExcel",props:{filterDeleted:{type:Boolean,default:!0},templateId:{type:String,required:!0},condition:{type:Object,default:()=>({})},limit:{type:Number,default:0},offset:{type:Number,default:0},order:{type:String,default:""}},setup(t){const i=t,p=async()=>{if(""===i.templateId)return void c.error("组件未设置模板ID");const t=JSON.parse(JSON.stringify(i.condition));i.filterDeleted&&(t.filterDeleted="true"),i.limit&&(t.limit=i.limit),i.offset&&(t.offset=i.offset),i.order&&(t.order=i.order);const o=Object.entries(t).map(([e,t])=>"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t))).join("&"),a=await e({templateID:i.templateId,params:o});if(0===a.code){c.success("创建导出任务成功，开始下载");const e="".concat("/api").concat(a.data);window.open(e,"_blank")}};return(e,t)=>{const c=o("el-button");return r(),a(c,{type:"primary",icon:"download",onClick:p},{default:n(()=>t[0]||(t[0]=[s("导出",-1)])),_:1,__:[0]})}}},m={__name:"exportTemplate",props:{templateId:{type:String,required:!0}},setup(e){const i=e,p=async()=>{if(""===i.templateId)return void c.error("组件未设置模板ID");const e=await t({templateID:i.templateId});if(0===e.code){c.success("创建导出任务成功，开始下载");const t="".concat("/api").concat(e.data);window.open(t,"_blank")}};return(e,t)=>{const c=o("el-button");return r(),a(c,{type:"primary",icon:"download",onClick:p},{default:n(()=>t[0]||(t[0]=[s("下载模板",-1)])),_:1,__:[0]})}}},u={__name:"importExcel",props:{templateId:{type:String,required:!0}},emits:["on-success"],setup(e,{emit:t}){const d=e,m=i().token,u=t,f="".concat("/api","/sysExportTemplate/importExcel?templateID=").concat(d.templateId),_=e=>{0===e.code?(c.success("导入成功"),u("on-success")):c.error(e.msg)};return(e,t)=>{const c=o("el-button"),i=o("el-upload");return r(),a(i,{action:f,"show-file-list":!1,"on-success":_,multiple:!1,headers:{"x-token":l(m)}},{default:n(()=>[p(c,{type:"primary",icon:"upload",class:"ml-3"},{default:n(()=>t[0]||(t[0]=[s(" 导入 ",-1)])),_:1,__:[0]})]),_:1},8,["headers"])}}};export{m as _,d as a,u as b};
