/*! 
 Build based on gin-vue-admin 
 Time : 1753275382000 */
import{s as e,d as a,t as l,u as t}from"./087AC4D233B64EB0autoCode.Dvr-TgE1.js";import{_ as o}from"./087AC4D233B64EB0warningBar.l9dXTiLp.js";import{a as u,g as s,c as d,o as i,f as n,b as r,w as p,h as c,F as m,D as g,i as f,ab as v,E as b}from"./087AC4D233B64EB0index.D_4CqggS.js";const w={class:"gva-table-box"},_={class:"gva-btn-list gap-3 flex items-center"},k={class:"flex justify-between items-center"},y=Object.assign({name:"AutoPkg"},{__name:"autoPkg",setup(y){const V=u({packageName:"",template:"",label:"",desc:""}),h=u([]);(async()=>{const a=await e();0===a.code&&(h.value=a.data)})();const B=(e,a,l)=>{/[\u4E00-\u9FA5]/g.test(a)?l(new Error("不能为中文")):/^\d+$/.test(a[0])?l(new Error("不能够以数字开头")):/^[a-zA-Z0-9_]+$/.test(a)?l():l(new Error("只能包含英文字母、数字和下划线"))},C=u({packageName:[{required:!0,message:"请输入包名",trigger:"blur"},{validator:B,trigger:"blur"}],template:[{required:!0,message:"请选择模板",trigger:"change"},{validator:B,trigger:"blur"}]}),x=u(!1),E=()=>{x.value=!1,V.value={packageName:"",template:"",label:"",desc:""}},N=u(null),A=async()=>{N.value.validate(async e=>{if(e){0===(await t(V.value)).code&&b({type:"success",message:"添加成功",showClose:!0}),j(),E()}})},D=u([]),j=async()=>{const e=await a();0===e.code&&(D.value=e.data.pkgs)};return j(),(e,a)=>{const t=s("el-button"),u=s("el-table-column"),y=s("el-table"),B=s("el-input"),U=s("el-form-item"),T=s("el-option"),F=s("el-select"),P=s("el-form"),q=s("el-drawer");return i(),d("div",null,[n(o,{href:"https://www.bilibili.com/video/BV1kv4y1g7nT?p=3",title:"此功能为开发环境使用，不建议发布到生产，具体使用效果请看视频https://www.bilibili.com/video/BV1kv4y1g7nT?p=3"}),r("div",w,[r("div",_,[n(t,{type:"primary",icon:"plus",onClick:a[0]||(a[0]=e=>{x.value=!0})},{default:p(()=>a[6]||(a[6]=[c(" 新增 ")])),_:1,__:[6]})]),n(y,{data:D.value},{default:p(()=>[n(u,{align:"left",label:"id",width:"120",prop:"ID"}),n(u,{align:"left",label:"包名",width:"150",prop:"packageName"}),n(u,{align:"left",label:"模板",width:"150",prop:"template"}),n(u,{align:"left",label:"展示名",width:"150",prop:"label"}),n(u,{align:"left",label:"描述","min-width":"150",prop:"desc"}),n(u,{align:"left",label:"操作",width:"200"},{default:p(e=>[n(t,{icon:"delete",type:"primary",link:"",onClick:a=>(async e=>{v.confirm("此操作仅删除数据库中的pkg存储，后端相应目录结构请自行删除与数据库保持一致！","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{0===(await l(e)).code&&(b({type:"success",message:"删除成功!"}),j())})})(e.row)},{default:p(()=>a[7]||(a[7]=[c(" 删除 ")])),_:2,__:[7]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),n(q,{modelValue:x.value,"onUpdate:modelValue":a[5]||(a[5]=e=>x.value=e),size:"40%","show-close":!1},{header:p(()=>[r("div",k,[a[10]||(a[10]=r("span",{class:"text-lg"},"创建Package",-1)),r("div",null,[n(t,{onClick:E},{default:p(()=>a[8]||(a[8]=[c(" 取 消 ")])),_:1,__:[8]}),n(t,{type:"primary",onClick:A},{default:p(()=>a[9]||(a[9]=[c(" 确 定 ")])),_:1,__:[9]})])])]),default:p(()=>[n(o,{title:"模板package会创建集成于项目本体中的代码包，模板plugin会创建插件包"}),n(P,{ref_key:"pkgForm",ref:N,model:V.value,rules:C.value,"label-width":"80px"},{default:p(()=>[n(U,{label:"包名",prop:"packageName"},{default:p(()=>[n(B,{modelValue:V.value.packageName,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.packageName=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),n(U,{label:"模板",prop:"template"},{default:p(()=>[n(F,{modelValue:V.value.template,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value.template=e)},{default:p(()=>[(i(!0),d(m,null,g(h.value,e=>(i(),f(T,{label:e,value:e,key:e},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),n(U,{label:"展示名",prop:"label"},{default:p(()=>[n(B,{modelValue:V.value.label,"onUpdate:modelValue":a[3]||(a[3]=e=>V.value.label=e),autocomplete:"off"},null,8,["modelValue"])]),_:1}),n(U,{label:"描述",prop:"desc"},{default:p(()=>[n(B,{modelValue:V.value.desc,"onUpdate:modelValue":a[4]||(a[4]=e=>V.value.desc=e),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}});export{y as default};
